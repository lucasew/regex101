id: io.github.lucasew.regex101
runtime: org.kde.Platform
runtime-version: 5.15-23.08
sdk: org.kde.Sdk
base: io.qt.qtwebengine.BaseApp
base-version: 5.15-23.08
command: regex101
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --filesystem=xdg-documents/regex101.sqlite
modules:
  - name: build
    sources:
        - type: git
          url: https://github.com/lucasew/regex101.git
          commit: master
        - type: file
          path: io.github.lucasew.regex101.xml
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
    post-install:
      - install -Dm644 -t ${FLATPAK_DEST}/share/applications installer/regex101.desktop
      - mv ${FLATPAK_DEST}/share/applications/{regex101,io.github.lucasew.regex101}.desktop
      - install -Dm644 -t ${FLATPAK_DEST}/share/icons/hicolor/128x128/apps installer/regex101.png
      - install -Dm644 -t ${FLATPAK_DEST}/share/share/metainfo io.github.lucasew.regex101.xml
      - ln -s ${FLATPAK_DEST}/bin/{regex101,io.github.lucasew.regex101}
